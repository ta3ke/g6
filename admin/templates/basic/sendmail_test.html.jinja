{% extends "base.html.jinja" %}

{% block title %}메일테스트{% endblock title %}
{% block subtitle %}메일테스트{% endblock subtitle %}

{% block content %}
  <section>
    <h2>테스트 메일 발송</h2>
    <div class="local_desc02 local_desc">
      <p>
        메일서버가 정상적으로 동작 중인지 확인할 수 있습니다.<br />
        아래 입력칸에 테스트 메일을 발송하실 메일 주소를 입력하시면, [메일검사] 라는 제목으로 테스트 메일을 발송합니다.<br />
        보내는 메일주소 : <strong>{{ from_email }}</strong><br /><br />
        1. 외부메일 설정을 사용 중이시라면, 외부메일 설정에서 사용 중인 메일 주소를 입력해야 메일이 정상적으로 발송됩니다.<br />
        2. 외부메일 설정이나 기타 설정을 하지 않았다면, 도메인과 다른 헤더로 여겨 스팸이나 차단될 가능성이 있습니다.<br />
        기본환경설정에서 관리자 메일 주소를 user{{ domain_mail_host(request) }} 같은 도메인 형식으로 설정할것을 권장합니다.
      </p>
    </div>
    <form name="fsendmailtest" method="post" action="/admin/sendmail_test_result" onsubmit="return form_submit(this);">
      <input type="hidden" name="token" value="" />
      <fieldset id="fsendmailtest">
        <legend>테스트메일 발송</legend>
        <label for="email">받는 메일주소<strong class="blind"> 필수</strong></label>
        <input type="text" name="email" value="{{ to_email }}" id="email" required class="required frm_input" size="80" />
        <input type="submit" value="발송" class="btn_submit" />
      </fieldset>
    </form>
    <div class="local_desc02 local_desc">
      <p>
        만약 [메일검사] 라는 내용으로 테스트 메일이 도착하지 않는다면 보내는 메일서버 혹은 받는 메일서버 중 문제가 발생했을 가능성이 있습니다.<br />
        따라서 보다 정확한 테스트를 원하신다면 여러 곳으로 테스트 메일을 발송하시기 바랍니다.<br />
      </p>
    </div>
  </section>

  <script>
    function form_submit(f) {
      f.token.value = generate_token();

      return true;
    }
  </script>
{% endblock content %}
